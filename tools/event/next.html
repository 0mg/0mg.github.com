<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<title>DOM Event Monitor</title>
<style>/*<![CDATA[*/
* {
  margin: 0;
  padding: 0;
}
dt, dd {
  display: inline-block;
  margin-right: 1ex;
}
dt {
  font-weight: bold;
}
.main, .side {
  display: table-cell;
  width: 50%;
  border-bottom: solid;
}
.side {
  border-left: solid;
}
.footer {
  position: absolute;
  bottom: 0;
}
/*]]>*/</style>
<script>//<![CDATA[
if (!window.addEventListener) {
  window.addEventListener = function(type, f) {
    document.attachEvent("on" + type, f);
  };
}
if (!Array.prototype.indexOf) {
  Array.prototype.indexOf = function(v) {
    for (var i = 0; i < this.length; ++i) {
      if (this[i] === v) return i;
    }
    return -1;
  };
}
//]]></script>
<script>//<![CDATA[
var eventlog = [];
var eventTypes = {
  dom3: [
    "abort",
    "blur",
    "click",
    "compositionstart",
    "compositionupdate",
    "compositionend",
    "dblclick",
    "DOMActivate",
    "DOMAttributeNameChanged",
    "DOMAttrModified",
    "DOMCharacterDataModified",
    "DOMElementNameChanged",
    "DOMFocusIn",
    "DOMFocusOut",
    //"DOMNodeInserted",
    "DOMNodeInsertedIntoDocument",
    //"DOMNodeRemoved",
    "DOMNodeRemovedFromDocument",
    //"DOMSubtreeModified",
    "error",
    "focus",
    "focusin",
    "focusout",
    "keydown",
    "keypress",
    "keyup",
    "load",
    "mousedown",
    "mouseenter",
    "mouseleave",
    "mousemove",
    "mouseout",
    "mouseover",
    "mouseup",
    "resize",
    "scroll",
    "select",
    "textinput",
    "unload",
    "wheel"
  ],
  html5: [
    "abort",
    "canplay",
    "canplaythrough",
    "change",
    "click",
    "contextmenu",
    "cuechange",
    "dblclick",
    "drag",
    "dragend",
    "dragenter",
    "dragleave",
    "dragover",
    "dragstart",
    "drop",
    "durationchange",
    "emptied",
    "ended",
    "input",
    "invalid",
    "keydown",
    "keypress",
    "keyup",
    "loadeddata",
    "loadedmetadata",
    "loadstart",
    "mousedown",
    "mousemove",
    "mouseout",
    "mouseover",
    "mouseup",
    "mousewheel",
    "pause",
    "play",
    "playing",
    "progress",
    "ratechange",
    "reset",
    "seeked",
    "seeking",
    "select",
    "show",
    "stalled",
    "submit",
    "suspend",
    "timeupdate",
    "volumechange",
    "waiting",
    "blur",
    "error",
    "focus",
    "load",
    "scroll",
    "afterprint",
    "beforeprint",
    "beforeunload",
    "blur",
    "error",
    "focus",
    "hashchange",
    "load",
    "message",
    "offline",
    "online",
    "pagehide",
    "pageshow",
    "popstate",
    "resize",
    "scroll",
    "storage",
    "unload",
    "readystatechange"
  ]
};
var eventList = [];
for (var i in eventTypes) {
  var types = eventTypes[i], lim = types.length;
  for (var j = 0; j < lim; ++j) {
    if (eventList.indexOf(types[j]) === -1) eventList.push(types[j]);
  }
}
function onEvent(event) {
  var props = document.createElement("dl");
  var evts = [];
  for (var i in event) {
    var ev = event[i];
    if (typeof ev === "function") {
      evts.push(["$", i + "()", ".."]);
    } else {
      evts.push([i, i, ev]);
    }
  }
  evts.sort();
  for (var i in evts) {
    var ev = evts[i];
    var name = document.createElement("dt");
    name.appendChild(document.createTextNode(ev[1]));
    props.appendChild(name);

    var value = document.createElement("dd");
    value.appendChild(document.createTextNode(ev[2]));
    props.appendChild(value);
  }
  var propsBox = document.getElementById("event-properties");
  while (propsBox.hasChildNodes()) propsBox.removeChild(propsBox.lastChild);
  propsBox.appendChild(props);

  eventlog.unshift(event.type);
  eventlog.length = 30;
  var logBox = document.getElementById("event-type-log");
  while (logBox.hasChildNodes()) logBox.removeChild(logBox.lastChild);
  logBox.appendChild(document.createTextNode(eventlog.join(" ")));
}
for (var i = 0; i < eventList.length; ++i) {
  window.addEventListener(eventList[i], function(e) {
    var it = e.target;
    var result = document.getElementById("event-result");
    if (it.compareDocumentPosition(result) === 10) return;
    onEvent(e);
  }, false);
}
//]]></script>
</head>
<body>
<div id="event-result">
  <div class="main" id="event-properties"></div>
  <div class="side" id="event-type-log"></div>
</div>
<div class="footer" id="event-area">
  <form>
  <a href="#a">#a</a>
  <a href="#b">#b</a>
  <input name="text" />
  <input type="reset" name="text" />
  <input type="radio" name="radio" checked="checked" />
  <input type="radio" name="radio" />
  <input type="checkbox" />
  <input type="range" />
  <input type="number" />
  </form>
</div>
</body>
</html>
