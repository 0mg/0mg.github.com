<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta charset="utf-8" />
<title>Color</title>
<style>/*<![CDATA[*/
* {
  margin: 0;
  padding: 0;
}
html {
  height: 100%;
  background: #000;
}
body {
  height: 100%;
  background-color: #000;
}
#colorbox {
  background-color: rgb(0,0,0);
  width: 100%;
  height: 100%;
}
.controller {
  display: table;
  width: 100%;
  position: fixed;
  bottom: 0;
}
.controll {
  display: table-cell;
}
.scroll {
  overflow-x: scroll;
}
.spacer {
  width: 875%;
  height: 1px;
}
/*]]>*/</style>
</head>
<script>
if (!Array.prototype.forEach) {
  Array.prototype.forEach = function(f) {
    for (var i = 0; i < this.length; ++i) {
      f(this[i], i, this);
    }
  };
}
function getStyle(el) {
  if (window.getComputedStyle) {
    return window.getComputedStyle(el,"");
  } else {
    return el.currentStyle;
  }
}
window.onload = function() {
  var html = document.documentElement;
  var body = document.getElementsByTagName("body")[0];
  var coltar = document.querySelector("#colorbox");
  var s = document.getElementsByTagName("div");
  for (var m = [], i = 0; i < s.length; ++i) {
    if (s[i].className === "scroll") {
      m.push(s[i]);
    }
  }
  s = m;
  s.forEach(function(e,i) {
    e.onscroll = function() {
      var max = e.scrollWidth - parseInt(getStyle(e).width);
      if (!isFinite(max)) {
        max = e.scrollWidth - parseInt(body.scrollWidth / 3);
      }
      var now = Math.round((255 / max) * e.scrollLeft);
      var bgcol = getStyle(coltar).backgroundColor;
      bgcol = bgcol.match(/\d+/g);
      bgcol[i] = now;
      coltar.style.backgroundColor = "rgb(" + bgcol + ")";
    };
  });
};
</script>
<body>
<div id="colorbox"></div>
<div class="controller">
<div class="controll"><div class="scroll"><div class="spacer"></div></div></div><div class="controll"><div class="scroll"><div class="spacer"></div></div></div><div class="controll"><div class="scroll"><div class="spacer"></div></div></div></div>
</body>
</html>
